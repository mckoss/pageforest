<html>

<head>
<title>Unit Test Runner</title>
<script src="../namespace.js"></script>
<script src="modules.js"></script>
<script src="../unit.js"></script>
<script src="../base.js"></script>
<script src="../timer.js"></script>
<script src="../loader.js"></script>
</head>

<body onload="runner.run();">
<h1 id="title"><script>document.write(document.title);</script></h1>
<script>
var unit = namespace.lookup('org.startpad.unit');
var modules = namespace.lookup('com.pageforest.modules');
var runner = namespace.lookup('com.pageforest.test.runner.html');
runner.define(function (ns) {
    function testModule(module) {
        var targetNamespace = modules.namespaces[module];

        if (modules.locations[targetNamespace + '.test']) {
            unit.runTest(targetNamespace, modules.locations);
        }
    }

    ns.run = function () {
        var target = location.hash;
        if (!target) {
            target = 'all';
        }
        else {
            target = target.substr(1);
        }

        if (target != 'all') {
            testModule(target);
            return;
        }

        for (module in modules.namespaces) {
            if (modules.namespaces.hasOwnProperty(module)) {
                testModule(module);
            }
        }

    };
});
</script>

<div id="divUnit" style="font-family: Courier;">
</div>

</body>
</html>
