namespace.lookup("com.pageforest.scratch").defineOnce(function(a){function b(){typeof applicationCache!="undefined"&&(applicationCache.status==applicationCache.UPDATEREADY?(applicationCache.swapCache(),location.reload()):applicationCache.addEventListener("updateready",b,!1))}var d=namespace.lookup("com.pageforest.client");a.extend({onReady:function(){b();$("#blob").focus();a.client=new d.Client(a);a.client.addAppBar();a.client.autoLoad=!0},getDoc:function(){return{blob:$("#blob").val()}},setDoc:function(a){$("#blob").val(a.blob)},
onStateChange:function(){var b=a.client.getDocURL(),c=$("#document");b?c.attr("href",b+"?callback=document").show():c.hide();$("#mydocs").attr("href","http://"+a.client.wwwHost+"/docs/");$("#app-details").attr("href","http://"+a.client.wwwHost+"/apps/"+a.client.appid)}})});